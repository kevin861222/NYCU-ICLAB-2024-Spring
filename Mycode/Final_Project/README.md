## single core CPU with domain specific IP
### Performance
- Clock Period : 3.9 ns
- Total Latency : 9166 cycles for 1000 instructions
- RTL Area (03_gate_sim) : 491881.4081  Î¼ğ‘š<sup>2 </sup>
- Core Area (06_post_sim) : 703267.488  Î¼ğ‘š<sup>2</sup>
- Memory Area :68199.14844 Î¼ğ‘š<sup>2</sup>
- Performance : (Total Cycle x Clock Period)<sup>3</sup> x Core area = 4.907 E+21
- Rank : 3 / 127

### å¯¦é©—æ¦‚è¿°
1. å¯¦ä½œå¸¶æœ‰ç‰¹åŒ– IP çš„ single core CPU ã€‚
2. æ¶µè“‹é©—è­‰ä»¥åŠå¾ RTL åˆ° APR ç«¯çš„è¨­è¨ˆï¼Œé ˆé€šé post-sim é©—è­‰ã€‚ 
3. ç‰¹åŒ– IP ç‚º Determinent ã€‚
4. æŒ‡ä»¤é›†å¦‚ä¸‹
   > ADD <br>
   > SUB<br>
   > MULT<br>
   > SET LESS THAN<br>
   > LOAD<br>
   > STORE<br>
   > BRANCH<br>
   > DET<br>


### å¯¦é©—è©•è«–
1. å†æ¬¡æ„Ÿè¬é€™é–€èª²è®“æˆ‘æ¥è§¸åˆ°é€™äº›çŸ¥è­˜ã€‚
2. é©—è­‰æ˜¯é–€å¤§å­¸å•ï¼ŒCPU æœƒç¢°åˆ°çš„å•é¡Œå¤ªå¤šäº†ï¼Œè¦è¨­è¨ˆå‡ºåš´å¯†çš„ pattern æ¯”æƒ³åƒä¸­èŠ±æ™‚é–“ï¼Œè»Ÿé«”èƒ½åŠ›åœ¨é€™æ™‚å€™é¡¯ç¾å‡ºé‡è¦æ€§ã€‚

### Tips

1. ä¸èƒ½ç”¨ä»»ä½•å½¢å¼çš„äºŒç¶­é™£åˆ—å–ä»£/ä¿®æ”¹ 16 å€‹ CPU registerï¼Œå¦å‰‡æœƒé€ æˆåˆæˆæ™‚é‡æ–°å‘½åï¼Œé€ æˆé©—è­‰å¤±æ•ˆã€‚
2. å¯ä»¥ä½¿ç”¨ Design hardwareï¼Œä¸ä½¿ç”¨ n-stage multiplier æœƒé€ æˆ critical path ï¼Œåš´é‡å½±éŸ¿æ•´é«”æ€§èƒ½ã€‚
3. åŠ©æ•™é©—è­‰çš„æ¸¬è³‡æ˜¯éš¨æ©Ÿç”¢ç”Ÿï¼Œè³‡æ–™é–“æ²’æœ‰ Spatial Locality èˆ‡ Temporal Locality ï¼Œå†åŠ ä¸Šé¡Œç›®è¦å®šæ¯åŸ·è¡Œå®Œ 10 ç­†æŒ‡ä»¤è¦å°‡ Data åŒæ­¥åˆ° DRAM ï¼Œé€ æˆè¨­è¨ˆ instruction cache æ•ˆç›Šæœƒé å¤§æ–¼ data cacheï¼Œä¹Ÿå°±æ˜¯èªª Data cache ç™¼ç”Ÿ miss çš„æ©Ÿç‡æœƒéå¸¸é«˜ï¼Œä¸éæˆ‘çš„æ¶æ§‹é‚„æ˜¯å°‡å…©è€…éƒ½å¯¦ç¾å‡ºä¾†ã€‚
4. pseudoDRAM å»¶é²ä¸æ˜¯å›ºå®šå¸¸æ•¸ï¼Œè€Œæ˜¯ 100 è‡³ 1000 cycles ï¼Œæˆ‘çš„ç­–ç•¥æ˜¯åŠ æ·± pipeline ä¾†é™ä½ clock period ï¼Œå› ç‚ºæœ€è€—æ™‚çš„ä¸æ˜¯é‹ç®—è€Œæ˜¯ cache miss åƒ DRAM è®€å–è³‡æ–™ä»¥åŠ Write back ã€‚
5. Write back éƒ¨åˆ†æˆ‘è¨­è¨ˆäº†å…©å€‹æ¨¡å¼ï¼Œsingle data write back ä»¥åŠ burst write backï¼Œæ¨¡å¼é¸å‰‡å–æ±ºæ–¼ dirty data æ•¸ç›®ã€‚
6. Determind çš„éƒ¨åˆ†æˆ‘æƒ³å‡ºäº†ä¸€å€‹å¾ˆå²å®³çš„ç®—æ³•ï¼Œå¯ä»¥çœä¸‹å¾ˆå¤šé¢ç©ï¼Œä¹Ÿè®“æ§åˆ¶ç°¡åŒ–å¾ˆå¤šï¼Œå¯ä»¥åƒè€ƒæˆ‘çš„ excel ã€‚
7. è¿«æ–¼æ™‚é–“å£“åŠ›ï¼Œæˆ‘æœªèƒ½å°‡æˆ‘çš„æ¶æ§‹å„ªåŒ–åˆ°æ¥µé™ï¼Œæœ€çµ‚åªæœ‰æ‹¿åˆ° RANK3 ï¼Œå¦‚æœæœªä¾†é¡Œç›®æ²’æœ‰å¤ªå¤§çš„æ›´å‹•ï¼Œå¯ä»¥å˜—è©¦ä½¿ç”¨æˆ‘çš„æ¶æ§‹ç¹¼çºŒå„ªåŒ–ï¼Œç›®å‰ critical path ä½æ–¼ determind ä¸Šçš„ä¹˜æ³•å™¨ï¼Œå¯ä»¥å˜—è©¦ä½¿ç”¨æ›´å¤šçš„ stage ï¼Œæˆ–æ˜¯åœ¨ mux è™•å¤šåˆ‡ä¸€å±¤ pipeline ï¼Œæ€§èƒ½å°‡æœ‰æ‰€æå‡ã€‚
8. ç‹€æ…‹æ©Ÿéå¸¸ç¹ç‘£ï¼Œç„¡æ³•ç”¨æ–‡å­—å‘ˆç¾ï¼Œæˆ‘å¹³æ¿ä¸­çš„ç­†è¨˜ä¹ŸæŠ½è±¡åˆ°å‡¡äººç„¡æ³•ç†è§£ï¼Œå»ºè­°å®‰è£ terosHDL æª¢é–±æˆ‘çš„ code ï¼Œé€™å€‹æ’ä»¶å¯ä»¥å¾ˆå¥½çš„é¡¯ç¤ºå‡ºæ¯å€‹ç‹€æ…‹é–“çš„é—œä¿‚ã€‚
9. æƒ³è¦å¤§å¹…åŠ é€Ÿé‹ç®—å¯ä»¥è¨­è¨ˆ instruction preload / predecode ã€‚
10. ä¸å»ºè­°è¨­è¨ˆ Out of order ï¼Œå¤ªéè¤‡é›œï¼Œæœ‰äº›æ±è¥¿å–®ç´”ç”¨ç¡¬é«”è§£æœƒæ‰å…‰æ‰€æœ‰é ­é«®ï¼Œé‡åˆ° Data Hazards å°±ç”¨ stall è§£æ±ºï¼Œæ±ºå‹é—œéµæ˜¯ clock period ä»¥åŠ DRAM è¨ªå•æ¬¡æ•¸ã€‚
11. æˆ‘çš„è¨­è¨ˆé€šéçš„éå¸¸åš´è¬¹çš„æ¸¬è©¦ï¼Œç¶“ç”±é«˜é” 150 çµ„ DRAM è³‡æ–™çš„æ´—ç¦®ï¼Œä»¥åŠäººç‚ºç”¢ç”Ÿçš„ corner case ï¼Œå¯ä»¥æ”¾å¿ƒçš„ä½¿ç”¨æˆ‘çš„æ¶æ§‹ã€‚ç”±æ–¼æˆ‘ä¸æ˜¯ Pattern åŸä½œè€…ï¼Œä¸¦ä¸æ‰“ç®—å…¬å¸ƒå‡ºä¾†ï¼Œä½†å¯ä»¥æä¾›ä¸€äº›é©—è­‰æƒ³æ³•ã€‚
    > a. data cache å’Œ instruction cache åŒæ™‚ç™¼ç”Ÿ miss <br>
    > b. é‡åˆ°å¾€å›è·³çš„ branch æŒ‡ä»¤ï¼Œä¸¦ä¸”ç™¼ç”Ÿ miss<br>
    > c. write back å’Œ instuction cache miss åŒæ™‚ç™¼ç”Ÿ<br>
    > d. Data miss (Load inst) ä½†å­˜åœ¨ dirty data<br>
    > e. branch loop ï¼Œä¹Ÿå°±æ˜¯æ–°çš„ pc ç­‰åŒèˆŠçš„ pc ï¼Œæˆ–æ˜¯å¾€å›è·³ä½† CPU reg æ•¸å€¼æœªè¢«æ›´å‹•ï¼Œé€ æˆé‚£æ¢ branch æŒ‡ä»¤æ°¸é æˆç«‹ (åŠ©æ•™èªªé€™æœ‰å¯èƒ½ç™¼ç”Ÿ)<br>
    > f. branch è·³å‡º preload ç¯„åœ<br>

### APR

![æˆªåœ– 2024-09-26 ä¸Šåˆ8 05 05](https://github.com/user-attachments/assets/1fba8da0-2394-4905-9736-5be39f6ff79c)


![æˆªåœ– 2024-09-26 ä¸Šåˆ8 05 17](https://github.com/user-attachments/assets/26a90b92-c60b-4a5e-90d7-b6df262d8e62)





### å…¶ä»–å®å›‘
1. æœ€å¾Œä¸€å“©è·¯ï¼ŒåŠ æ²¹ã€‚
